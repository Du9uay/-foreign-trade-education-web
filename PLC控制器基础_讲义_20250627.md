# PLC控制器基础 - 教学讲义

## 一、课程内容概述（5%权重）

本节课程主要涉及以下知识点：

（1）一、plc行业认知与基础框架

工业控制器的定义、核心作用、分类对比及plc的发展历史、主要品牌、中国竞争格局和典型应用场景认知

（2）二、PLC核心定位与硬件基础

PLC的高可靠性与实时性核心特性、扫描循环工作原理、硬件最小系统的CPU、电源、I/O模块组成及急停电路独立硬接线的安全规范基础

（3）三、电气接线与信号认知

I/O接线的两线制/三线制传感器接线规范、熔断器选型原则、继电器隔离方法及数字信号状态判定阈值和模拟信号概念辨析

（4）四、梯形图编程

梯形图编程的常开触点、常闭触点、输出线圈、TON定时器、计数器五大基础指令，起保停电路构建及电气与机械互锁的实现方式

（5）五、程序开发与调试

TIA Portal工程创建、梯形图编写、下载监控的基础操作，以及变量强制修改和CPU状态指示灯诊断的调试技能

（6）六、安全强化模块

漏电保护原理、安全电压等级的电气安全知识，双线圈冲突后果及急停梯形图设计禁忌的编程安全内容

## 二、课程学习目标（5%权重）

通过本课程学习，学生将能够：
1. 掌握工业控制器分类及适用场景，熟悉离散制造、过程控制等生产流程，具有通过查阅资料了解PLC、DCS、SCADA等不同工业控制器特点及适用场景的能力
2. 掌握PLC发展历程相关知识，熟悉PLC从第一代到第三代的功能演变流程，具有利用教材等资料梳理PLC发展各阶段特点的能力
3. 掌握PLC硬件组成及I/O接线规范，熟悉PLC最小系统由CPU、电源和I/O模块构成，具有使用工具进行两线制、三线制传感器I/O接线以及熔断器选型、继电器隔离操作的能力
4. 掌握梯形图编程基础指令及编程范式，熟悉起保停电路、电气与机械互锁等编程范式，具有使用TIA Portal软件进行梯形图编写的能力
5. 掌握电气安全与编程安全相关知识，熟悉漏电保护电路设计、急停梯形图设计要求，具有运用相关知识设计急停梯形图并避免编程中双线圈冲突的能力

## 三、本单元涉及的岗位（5%权重）

### 一、相关岗位及需求量  
国内随着制造业自动化升级，PLC相关岗位需求量呈上升趋势。在离散制造（如汽车制造、机械加工）、过程控制（如化工、电力）、基础设施（如智能楼宇）等领域，对PLC编程、调试、维护人员的需求逐渐增加。尤其国内PLC品牌不断发展，带动了对熟悉国产PLC技术的岗位需求增长，如PLC编程工程师、自动化控制工程师等岗位需求量持续上升。  


### 二、岗位门槛  
1. **教育背景**：通常要求电气自动化、机电一体化等相关专业大专及以上学历。  
2. **技能证书**：部分企业要求具备PLC相关认证证书，如西门子PLC认证、三菱PLC认证等。  
3. **基础技能**：需掌握电气原理、电路接线知识，熟悉PLC编程软件（如TIA Portal、GX Works等），具备基本的硬件接线与调试能力。  


### 三、技能对应关系  
1. **PLC行业认知与基础框架相关知识点**  
   - **工业控制器分类对比**：对应岗位技能要求为能根据工业控制场景（离散制造、过程控制等）选择合适的工业控制器（如根据场景选择PLC、DCS或SCADA）。  
   - **PLC发展历史与品牌简介**：对应岗位技能要求为了解不同品牌PLC的特点，能根据项目需求选择适配的PLC品牌及型号。  
   - **典型应用场景认知**：对应岗位技能要求为能分析不同应用场景（如汽车装配线、化工厂反应罐等）的控制需求，设计相应的PLC控制方案。  

2. **技术要点与操作方法相关知识点**  
   - **工业控制器分类对比要点分析**：对应岗位技能要求为熟练对比不同工业控制器的适用场景、功能特点等，精准选择并配置控制器。  
   - **PLC典型应用场景的操作方法思考**：对应岗位技能要求为能根据应用场景编写梯形图程序，进行硬件接线，并调试PLC控制程序以确保设备按预定程序动作。  

3. **实践应用与操作要点相关知识点**  
   - **工业控制器分类对比实践步骤**：对应岗位技能要求为能按照步骤明确工业控制需求，收集并对比不同控制器信息，选择最优控制器。  
   - **PLC在汽车装配线应用的实践步骤**：对应岗位技能要求为能独立编写梯形图程序、进行硬件接线与调试，解决PLC应用中的实际问题。

## 四、课程内容详解（70%权重）

### 模块1：一、plc行业认知与基础框架

#### 一、理论基础与概念解析
##### 1. 工业控制器的定义与核心作用
工业控制器是一种专门用于自动执行逻辑、时序或算法的计算机设备，它能够接收来自传感器的信号，并根据预设的程序驱动执行机构工作。其核心作用在于替代人工操作，实现高精度、高可靠性以及可重构的自动化控制。例如，在汽车制造的焊接工序中，工业控制器可以精确控制焊接机器人的动作时序，确保每一个焊点的质量和位置都符合标准，相比人工操作，极大提高了生产效率和产品质量的稳定性。

##### 2. 工业控制器的分类对比
工业控制器主要包括PLC（可编程逻辑控制器）、DCS（分布式控制系统）、SCADA（数据采集与监视控制系统）等。其中，PLC具有结构简单、编程方便、可靠性高的特点，适用于离散型的工业控制场景，如汽车装配线、机械加工等；DCS则更侧重于过程控制，能够对大规模的工业生产过程进行集中监控和分散控制，常用于化工、电力等连续生产行业；SCADA主要用于对远程设备的监控和数据采集，广泛应用于水利、能源等领域。以汽车装配线为例，PLC可以精准控制机械手的动作序列，实现汽车零部件的有序装配，而如果使用DCS来控制这种离散型的装配过程则显得过于复杂和冗余。

##### 3. PLC的发展历史
PLC的发展经历了三代。第一代PLC出现在20世纪70年代，主要功能是替代继电器控制系统，实现逻辑控制，体积较大，功能较为单一；第二代PLC在20世纪80年代问世，具备了模拟量处理、通信等功能，性能有所提升；第三代PLC从20世纪90年代开始发展，采用了更先进的微处理器和通信技术，具有更高的运算速度和更强的网络通信能力，能够满足复杂工业控制场景的需求。例如，第一代PLC可能只能实现简单的开关量逻辑控制，而第三代PLC已经可以支持复杂的运动控制和远程监控功能。

##### 4. PLC品牌简介
目前市场上知名的PLC品牌有西门子、罗克韦尔、欧姆龙、三菱、汇川等。西门子的PLC产品性能稳定，功能丰富，在全球工业控制领域占据重要地位；罗克韦尔的PLC具有强大的运动控制和过程控制功能，广泛应用于高端制造业；欧姆龙的PLC体积小巧，性价比高，适合中小型工业控制场景；三菱的PLC在亚洲市场拥有广泛的用户群体，编程简单易懂；汇川是国内知名的PLC品牌，近年来在国产PLC市场中不断突围，性能逐渐提升，价格相对亲民，逐渐得到国内中小企业的认可。

##### 5. 中国PLC竞争格局
目前中国PLC市场仍以外资品牌主导，西门子、罗克韦尔等国际巨头占据了较大的市场份额。但国内PLC品牌也在不断突围，汇川技术等企业通过加大研发投入，提升产品性能和稳定性，逐渐缩小与外资品牌的技术差距。然而，国内PLC品牌在高端市场的占有率仍然较低，主要原因在于技术积累相对较少，产品的可靠性和稳定性还有待进一步提高。例如，在一些高精度、高可靠性要求的工业控制场景中，国内PLC品牌的产品还难以完全替代外资品牌的产品。

##### 6. 典型应用场景认知
- **离散制造（以汽车装配线为例）**：在汽车装配线上，PLC用于控制机械手的动作序列。机械手需要按照预定的程序依次完成抓取、搬运、安装等动作，PLC通过接收传感器信号来判断机械手的位置和状态，并发出相应的控制指令驱动机械手工作。例如，当传感器检测到机械手到达指定位置时，PLC会控制机械手进行抓取动作，确保汽车零部件能够准确安装到相应位置。
- **过程控制（以化工厂反应罐为例）**：在化工厂的反应罐中，PLC用于调节温度和液位。通过安装温度传感器和液位传感器来实时监测反应罐内的温度和液位变化，PLC根据预设的温度和液位范围，控制加热设备和补液设备的工作，使反应罐内的温度和液位保持在合适的范围内，保证化学反应的正常进行。
- **基础设施（以智能楼宇为例）**：在智能楼宇中，PLC用于管理电梯调度与照明。通过PLC可以实现对多台电梯的运行状态进行监控和调度，根据乘客的呼叫信号合理分配电梯，提高电梯的运行效率；同时，PLC还可以控制楼宇内的照明系统，根据光线强度和时间等因素自动调节照明亮度，实现节能降耗。

#### 二、技术要点与操作方法
##### 1. 工业控制器分类对比要点分析
在对比不同类型工业控制器时，需要重点关注其适用场景、功能特点和性能指标。例如，对于离散制造场景，应优先考虑PLC的逻辑控制能力和运动控制能力；对于过程控制场景，则需要关注DCS的过程调节和集中监控功能；对于远程监控场景，SCADA的远程数据采集和监视功能更为重要。在实际应用中，要根据具体的工业控制需求来选择合适的工业控制器。比如，在一个小型的机械加工车间，只需要实现简单的开关量逻辑控制，那么选择一款性价比高的PLC即可满足需求；而在一个大型的化工生产厂，需要对多个生产环节进行集中监控和过程调节，此时则需要采用DCS系统。

##### 2. PLC典型应用场景的操作方法思考
以汽车装配线中PLC控制机械手动作为例，首先需要根据机械手的动作流程进行编程，确定各个动作的触发条件和执行顺序。然后，进行硬件接线，将机械手的驱动电机、传感器等与PLC的I/O模块连接。最后，通过调试程序来确保机械手能够按照预定的程序准确动作。具体来说，编程时要使用梯形图语言来编写逻辑控制程序，明确常开触点、常闭触点等的使用来实现机械手的启动、停止、动作切换等功能；硬件接线时要注意按照I/O接线规范进行连接，确保信号传输的可靠性；调试时要通过监控程序运行状态，检查传感器信号是否正常、执行机构是否按照程序动作等，及时发现并解决问题。

#### 三、实践应用与操作要点
##### 1. 工业控制器分类对比实践步骤
- **步骤1：明确工业控制需求**：首先需要对具体的工业控制场景进行分析，确定是离散制造、过程控制还是基础设施监控等需求。例如，假设是一个小型的电子元件组装车间，需求是实现简单的开关量逻辑控制。
- **步骤2：收集不同类型工业控制器信息**：通过查阅资料、咨询行业人士等方式，收集PLC、DCS、SCADA等不同类型工业控制器的产品信息，包括功能特点、性能指标、价格等。
- **步骤3：对比分析选择合适控制器**：根据第一步确定的需求和第二步收集的信息，对不同类型的工业控制器进行对比分析，选择最适合该场景的工业控制器。例如，对于小型电子元件组装车间的简单开关量逻辑控制需求，选择PLC是比较合适的，因为PLC结构简单、编程方便、价格相对较低。

##### 2. PLC在汽车装配线应用的实践步骤
- **步骤1：编写梯形图程序**：根据汽车装配线中机械手的动作流程，使用TIA Portal等编程软件编写梯形图程序。例如，首先编写机械手启动的逻辑程序，通过常开触点来触发机械手的启动信号；然后编写机械手各个动作的顺序控制程序，使用定时器、计数器等指令来实现动作的时序控制。
- **步骤2：硬件接线**：按照I/O接线规范，将机械手的驱动电机、传感器等与PLC的I/O模块进行连接。具体来说，将传感器的信号线连接到PLC的DI（数字输入）模块，将驱动电机的控制线连接到PLC的DO（数字输出）模块，同时为PLC连接电源模块。
- **步骤3：程序下载与调试**：将编写好的程序下载到PLC中，然后通过监控程序运行状态来进行调试。观察传感器信号是否能够正确输入到PLC，驱动电机是否能够按照程序指令准确动作。如果发现问题，及时修改程序并重新下载调试，直到机械手能够按照预定的程序准确完成所有动作。


### 模块2：二、PLC核心定位与硬件基础

#### 一、理论基础与概念解析
##### 1. PLC的核心特性
PLC具有高可靠性和实时性保障的核心特性。高可靠性体现在PLC采用了硬件冗余、软件容错等技术，能够在恶劣的工业环境下长时间稳定运行。例如，PLC的电源模块具有过压、过流保护功能，CPU模块采用了抗干扰设计，能够有效抵御电磁干扰等。实时性保障则是指PLC能够在短时间内快速响应输入信号的变化，并及时输出控制信号驱动执行机构工作。在工业生产中，很多控制过程需要PLC能够实时响应，比如在自动化生产线上，当传感器检测到物料到达指定位置时，PLC需要在极短的时间内发出指令控制机械臂进行抓取动作，以保证生产流程的连续性和稳定性。

##### 2. PLC的工作原理
PLC的工作原理是基于扫描循环流程。首先，PLC会进行内部处理，包括自诊断、与编程设备通信等；然后进行输入采样，读取所有输入端子的状态并将其存入输入映像寄存器；接着进行程序执行，按照梯形图程序的顺序依次扫描执行指令，将结果存入输出映像寄存器；最后进行输出刷新，将输出映像寄存器中的状态通过输出端子输出到外部设备。例如，一个简单的点动控制程序，当输入端子接收到启动信号时，输入采样阶段会将该信号状态存入输入映像寄存器，程序执行阶段会根据梯形图逻辑使输出线圈得电，输出刷新阶段则将输出状态通过输出端子驱动接触器线圈，从而实现电机的点动控制。通过实时性实验可以观察到，PLC能够在极短的时间内完成整个扫描循环，保证控制的实时性。

##### 3. 硬件最小系统组成
PLC的硬件最小系统由CPU、电源和I/O模块组成。CPU模块是PLC的核心，负责执行用户程序、处理数据和通信等功能；电源模块为PLC提供稳定的工作电源，通常有交流电源和直流电源两种类型；I/O模块用于连接外部设备，DI模块用于接收外部输入信号（如传感器信号），DO模块用于输出控制信号（如驱动电机的信号）。例如，一个简单的PLC控制系统中，CPU模块负责运行用户编写的程序，电源模块为整个系统供电，DI模块连接限位开关等输入设备，DO模块连接继电器等输出设备。

##### 4. DI/DO点数估算原则
DI/DO点数的估算需要根据实际的工业控制需求来进行。对于DI点数，需要统计系统中需要检测的输入信号数量，包括传感器、按钮等的数量。例如，在一个汽车装配线的检测系统中，需要检测物料的到位信号、设备的故障信号等，这些信号都需要通过DI模块输入到PLC中，所以DI点数需要根据实际检测信号的数量来确定。对于DO点数，需要统计系统中需要输出控制的设备数量，如电机、电磁阀等的数量。例如，需要控制机械臂的动作、传送带的启停等，这些都需要通过DO模块输出信号来实现，所以DO点数要根据输出控制设备的数量来估算。一般来说，DI/DO点数的估算要留有一定的余量，以满足系统未来可能的扩展需求。

##### 5. 安全规范基础 - 急停电路独立硬接线设计
急停电路需要采用独立硬接线设计，以确保在紧急情况下能够快速切断控制电路，保障人员和设备的安全。急停按钮通常直接连接到PLC的DI模块，并且其接线要独立于其他控制电路，避免受到其他电路故障的影响。当按下急停按钮时，急停信号会直接输入到PLC，PLC会立即停止输出控制信号，使相关设备停止工作。例如，在工业生产线上，当发生紧急情况时，操作人员可以迅速按下急停按钮，通过独立硬接线的急停电路使整个生产线立即停止运行，防止事故进一步扩大。

#### 二、技术要点与操作方法
##### 1. PLC特性分析与应用
在分析PLC的高可靠性特性时，要了解其硬件和软件方面的保障措施。硬件方面，PLC的电路板采用了多层板设计和表面贴装技术，提高了抗干扰能力；软件方面，具有故障自诊断功能，能够及时发现并提示PLC内部的故障。在实际应用中，对于一些对可靠性要求极高的工业场景，如核电站的控制，会优先选择具有高可靠性的PLC产品，并通过定期维护和检测来确保其稳定运行。对于实时性保障，需要根据具体的控制周期来选择合适性能的PLC。例如，在高速运动控制场景中，需要选择扫描速度快的PLC，以满足实时响应的要求。

##### 2. 硬件选型方法
在进行PLC硬件选型时，首先要根据控制需求确定CPU的性能要求，包括运算速度、内存容量等。如果是简单的逻辑控制，选择运算速度较慢、内存容量较小的CPU即可；如果是复杂的运动控制或过程控制，需要选择运算速度快、内存容量大的CPU。然后，根据DI/DO点数估算结果来选择合适的I/O模块，确保I/O模块的点数能够满足实际需求。同时，还要考虑电源模块的功率是否能够满足整个系统的供电需求。例如，一个需要检测10个输入信号、控制5个输出设备的控制系统，选择CPU模块时要考虑其运算能力能够处理这些信号，选择I/O模块时要确保DI点数至少为10，DO点数至少为5，电源模块的功率要能够为CPU、I/O模块等提供稳定的电源。

#### 三、实践应用与操作要点
##### 1. PLC硬件连接实操步骤
- **步骤1：确定硬件配置**：根据控制需求确定所需的CPU模块、电源模块和I/O模块的型号和数量。例如，需要控制5个输出设备和8个输入设备，选择相应型号的CPU、电源和I/O模块。
- **步骤2：安装硬件**：将CPU模块、电源模块和I/O模块安装到PLC的机架上，确保安装牢固。例如，按照PLC机架的安装说明，将各个模块正确插入对应的插槽。
- **步骤3：接线**：按照I/O接线规范进行接线。将输入设备（如传感器）的信号线连接到DI模块的相应端子，将输出设备（如继电器）的控制线连接到DO模块的相应端子，同时将电源模块的电源线连接到PLC的电源端子。例如，将传感器的信号线红色线连接到DI模块的+24V端子，黑色线连接到DI模块的输入端子；将继电器的控制线连接到DO模块的输出端子，另一端连接到继电器的线圈。
- **步骤4：通电测试**：接通PLC的电源，观察电源模块的指示灯是否正常亮起，CPU模块的指示灯是否处于运行状态。如果指示灯正常，说明硬件连接基本正确。

##### 2. 模块配置实践步骤
- **步骤1：打开编程软件**：打开TIA Portal等PLC编程软件，创建一个新的工程。
- **步骤2：添加硬件**：在软件中添加所需的CPU模块、电源模块和I/O模块。例如，通过软件的硬件配置界面，选择相应的模块型号并添加到工程中。
- **步骤3：配置模块参数**：对添加的模块进行参数配置，包括DI/DO模块的点数设置、电源模块的电压设置等。例如，设置DI模块的输入点数为8，DO模块的输出点数为5，电源模块的输入电压为220V等。
- **步骤4：下载配置到PLC**：将配置好的硬件参数下载到PLC中，使PLC按照配置的硬件进行工作。例如，通过软件的下载功能将硬件配置文件传输到PLC中，PLC会根据配置文件进行相应的硬件设置。


### 模块3：三、电气接线与信号认知

#### 一、理论基础与概念解析
##### 1. I/O接线规范 - 两线制/三线制传感器接线
- **两线制传感器接线**：两线制传感器通常由两根导线组成，一根是电源线，另一根是信号线。接线时，将电源线连接到PLC的+24V端子，信号线连接到PLC的DI模块的输入端子。例如，一个两线制的接近开关，红色线连接PLC的+24V端子，黑色线连接PLC的DI模块的输入端子。两线制传感器的优点是接线简单，但需要注意电源的容量，因为传感器和电源是串联的。
- **三线制传感器接线**：三线制传感器有三根导线，分别是电源线（+）、电源线（-）和信号线。接线时，将+24V电源线连接到传感器的+端子，-24V电源线连接到传感器的-端子，信号线连接到PLC的DI模块的输入端子。例如，一个三线制的光电传感器，红色线连接PLC的+24V端子，蓝色线连接PLC的-24V端子，黑色线连接PLC的DI模块的输入端子。三线制传感器的抗干扰能力相对较强，因为电源和信号是分开的。

##### 2. I/O接线规范 - 熔断器选型与继电器隔离
- **熔断器选型**：熔断器用于保护电路，防止过流损坏设备。选型时要根据电路的额定电流来选择合适的熔断器。一般来说，熔断器的额定电流要略大于电路的正常工作电流。例如，一个电路的正常工作电流为5A，那么可以选择额定电流为6A的熔断器。熔断器要安装在电源进线端，当电路发生过流故障时，熔断器会熔断，切断电路。
- **继电器隔离**：继电器隔离可以防止外部电路的干扰影响PLC的正常工作。在PLC的I/O电路中，通过继电器将PLC的内部电路与外部电路隔离。当外部信号输入时，继电器线圈得电，触点闭合，将信号传输到PLC的DI模块；当PLC输出信号时，继电器线圈得电，触点闭合，驱动外部设备工作。例如，在PLC控制电机的电路中，通过继电器将PLC的DO模块与电机的驱动电路隔离，防止电机的强电干扰影响PLC。

##### 3. 信号类型辨析 - 数字信号：状态判定阈值
数字信号是指只有两种状态的信号，如0和1、开和关等。在PLC中，需要设定状态判定阈值来区分数字信号的两种状态。例如，对于一个输入信号，当信号电压高于某个阈值时，判定为1状态（高电平）；当信号电压低于某个阈值时，判定为0状态（低电平）。这个阈值通常由PLC的DI模块的输入特性决定，一般在产品手册中会有明确的说明。在实际应用中，需要根据传感器的输出特性来调整阈值，确保数字信号的正确判定。例如，一个接近开关的输出信号在物体靠近时为高电平，远离时为低电平，需要将PLC的DI模块的输入阈值设置为合适的值，以准确检测接近开关的状态。

##### 4. 信号类型辨析 - 模拟信号概念引入
模拟信号是指在时间和数值上都连续变化的信号，如温度、压力、电流、电压等。模拟信号需要通过模拟量输入模块（AI模块）转换为数字信号才能被PLC处理。AI模块能够将外部的模拟信号（如0 - 10V的电压信号）转换为PLC可以识别的数字量。例如，在一个温度控制系统中，温度传感器输出的是模拟电压信号，通过AI模块将其转换为数字信号，PLC根据这个数字信号来调节加热设备的功率，从而实现对温度的精确控制。模拟信号的处理需要考虑信号的量程、精度等因素，以确保转换后的数字信号能够准确反映模拟信号的变化。

#### 二、技术要点与操作方法
##### 1. 信号处理原理
在处理数字信号时，要理解状态判定阈值的设置对信号识别的重要性。正确设置阈值可以避免信号的误判，确保PLC能够准确接收输入信号。对于模拟信号，要掌握AI模块的工作原理和参数设置方法。例如，在设置AI模块的量程时，需要根据模拟信号的实际范围来进行设置，以保证转换后的数字信号能够准确对应模拟信号的数值。同时，要考虑模拟信号的精度要求，选择合适精度的AI模块，以满足工业控制的精度需求。

##### 2. 接线操作技巧
在进行I/O接线时，要注意接线的规范性和可靠性。对于两线制和三线制传感器的接线，要严格按照接线规范进行连接，确保电源线和信号线连接正确。在选择熔断器时，要根据电路的实际情况准确选型，避免熔断器选型过大或过小。在进行继电器隔离接线时，要确保继电器的触点连接可靠，避免因触点接触不良导致电路故障。例如，在接线过程中，要使用合适的接线端子和导线，保证接线牢固，防止松动导致接触不良。

#### 三、实践应用与操作要点
##### 1. 两线制/三线制传感器接线实践步骤
- **步骤1：准备工具和材料**：准备好螺丝刀、导线、两线制和三线制传感器等工具和材料。
- **步骤2：连接两线制传感器**：将两线制传感器的一根导线连接到PLC的+24V端子，另一根导线连接到PLC的DI模块的输入端子。例如，将接近开关的红色线连接到PLC的+24V端子，黑色线连接到PLC的DI模块的输入端子X0。
- **步骤3：连接三线制传感器**：将三线制传感器的+24V电源线连接到PLC的+24V端子，-24V电源线连接到PLC的-24V端子，信号线连接到PLC的DI模块的输入端子。例如，将光电传感器的红色线连接到PLC的+24V端子，蓝色线连接到PLC的-24V端子，黑色线连接到PLC的DI模块的输入端子X1。
- **步骤4：检查接线**：检查接线是否正确，确保电源线和信号线连接牢固，没有松动或短路现象。

##### 2. 熔断器选型与继电器隔离实践步骤
- **步骤1：确定电路参数**：首先确定需要保护的电路的额定电流。例如，一个电机驱动电路的额定电流为4A。
- **步骤2：选择熔断器**：根据电路的额定电流，选择额定电流略大于4A的熔断器，如5A的熔断器。
- **步骤3：安装熔断器**：将熔断器安装在电路的电源进线端。
- **步骤4：进行继电器隔离接线**：选择合适的继电器，将继电器线圈的一端连接到PLC的DO模块的输出端子，另一端连接到电源；将继电器的触点串联到外部设备的控制电路中。例如，将继电器线圈连接到PLC的DO模块的输出端子Y0，触点串联到电机的控制电路中。然后检查继电器的触点连接是否可靠，确保能够正常隔离电路。


### 模块4：四、梯形图编程

#### 一、理论基础与概念解析
##### 1. 梯形图编程的五大基础指令
- **常开触点**：常开触点在梯形图中表示当输入条件满足时，触点闭合。例如，一个按钮的常开触点，当按钮按下时，触点闭合，电路导通。在梯形图中，常开触点用一条水平线段和一个垂直的短横线表示，短横线在水平线段的上方。
- **常闭触点**：常闭触点表示当输入条件不满足时，触点闭合。例如，一个按钮的常闭触点，当按钮未按下时，触点闭合，电路导通。在梯形图中，常闭触点用一条水平线段和一个垂直的短横线表示，短横线在水平线段的下方。
- **输出线圈**：输出线圈用于驱动外部设备，当输出线圈得电时，对应的外部设备工作。在梯形图中，输出线圈用一个圆圈表示，圆圈内通常标注设备名称或编号。例如，一个控制电机的输出线圈，当输出线圈得电时，电机启动。
- **TON定时器**：TON定时器用于实现延时功能。它需要设置预设时间，当输入信号接通时，定时器开始计时，当计时达到预设时间时，定时器的触点动作。例如，设置TON定时器的预设时间为5秒，当输入信号接通后，经过5秒，定时器的触点闭合，触发后续的动作。
- **计数器**：计数器用于对输入信号的脉冲进行计数。它需要设置计数次数，当输入信号的脉冲数达到计数次数时，计数器的触点动作。例如，设置计数器的计数次数为10次，当输入信号有10个脉冲时，计数器的触点闭合，执行相应的操作。

##### 2. 编程范式 - 起保停电路
起保停电路是梯形图编程中常用的一种范式，用于实现设备的启动、保持和停止控制。起保停电路的组成包括启动按钮的常开触点、停止按钮的常闭触点和输出线圈。具体来说，启动按钮的常开触点与输出线圈的常开触点并联，然后与停止按钮的常闭触点串联，最后连接到电源。当按下启动按钮时，启动按钮的常开触点闭合，输出线圈得电并自锁（通过输出线圈的常开触点并联在启动按钮的常开触点两端），设备启动；当按下停止按钮时，停止按钮的常闭触点断开，输出线圈失电，设备停止。例如，在一个电机的起保停控制电路中，启动按钮连接到PLC的DI模块的输入端子X0，停止按钮连接到PLC的DI模块的输入端子X1，电机的控制线圈连接到PLC的DO模块的输出端子Y0，通过编写起保停电路的梯形图程序来实现电机的启动、保持和停止控制。

##### 3. 编程范式 - 电气与机械互锁实现
电气互锁和机械互锁用于防止不同设备的同时动作，确保系统的安全运行。电气互锁是通过电气元件的触点来实现的，例如在电机正反转控制电路中，正转接触器的常闭触点与反转接触器的线圈串联，反转接触器的常闭触点与正转接触器的线圈串联。这样，当正转接触器得电时，其常闭触点断开，反转接触器的线圈无法得电；反之亦然。机械互锁则是通过机械结构来实现的，例如在电机正反转的机械开关中，通过机械装置确保正转和反转的开关不能同时闭合。在梯形图编程中，电气互锁可以通过编写常闭触点串联的程序来实现，例如在正反转控制程序中，将正转接触器的常闭触点串联到反转接触器的线圈回路中，将反转接触器的常闭触点串联到正转接触器的线圈回路中。

#### 二、技术要点与操作方法
##### 1. 基础指令应用要点
在使用常开触点和常闭触点时，要注意正确连接输入信号和输出线圈。确保常开触点能够正确反映输入信号的状态，常闭触点能够在输入信号不满足时闭合电路。对于TON定时器和计数器，要准确设置预设时间和计数次数，并正确连接输入信号和触点。例如，在设置TON定时器的预设时间时，要根据实际的延时需求来选择合适的时间单位和数值，确保延时准确。在使用计数器时，要保证输入信号的脉冲能够正确被计数，避免因脉冲信号不稳定导致计数错误。

##### 2. 起保停电路构建方法
构建起保停电路时，首先要确定启动按钮和停止按钮的输入端子，以及输出设备的输出端子。然后，按照起保停电路的逻辑关系编写梯形图程序。具体步骤如下：首先，将启动按钮的常开触点与输出线圈的常开触点并联；然后，将并联后的电路与停止按钮的常闭触点串联；最后，将串联后的电路连接到电源。在编写程序时，要注意触点的连接顺序和逻辑关系的正确性，确保电路能够实现正确的启动、保持和停止功能。例如，在编写电机起保停控制程序时，启动按钮X0的常开触点与输出线圈Y0的常开触点并联，然后与停止按钮X1的常闭触点串联，最后连接到电源，这样就构成了起保停电路的梯形图程序。

#### 三、实践应用与操作要点
##### 1. 五大基础指令编程实践步骤
- **步骤1：打开编程软件**：打开TIA Portal等编程软件，创建一个新的梯形图程序文件。
- **步骤2：添加常开触点**：在梯形图编辑界面中，选择常开触点指令，将其放置在程序段中。然后，连接输入端子和输出线圈，例如将常开触点的一端连接到输入端子X0，另一端连接到输出线圈Y0的一端。
- **步骤3：添加常闭触点**：选择常闭触点指令，放置在程序段中，连接相应的输入端子和输出线圈，例如将常闭触点的一端连接到输入端子X1，另一端连接到输出线圈Y0的另一端。
- **步骤4：添加输出线圈**：选择输出线圈指令，放置在程序段中，连接输入触点和电源，例如将输出线圈的一端连接到常开触点和常闭触点的连接点，另一端连接到电源的一端，同时将电源的另一端连接到公共端。
- **步骤5：添加TON定时器**：选择TON定时器指令，设置预设时间为5秒，然后连接输入端子和输出触点，例如将TON定时器的使能端连接到输入端子X2，定时时间输出端连接到输出线圈Y1的一端。
- **步骤6：添加计数器**：选择计数器指令，设置计数次数为10次，然后连接输入端子和输出触点，例如将计数器的计数输入端连接到输入端子X3，计数使能端连接到输入端子X4，计数输出端连接到输出线圈Y2的一端。

##### 2. 起保停电路编程实践步骤
- **步骤1：确定输入输出端子**：确定启动按钮连接的输入端子为X0，停止按钮连接的输入端子为X1，电机控制线圈连接的输出端子为Y0。
- **步骤2：编写梯形图程序**：在梯形图编辑界面中，首先将X0的常开触点与Y0的常开触点并联；然后将并联后的电路与X1的常闭触点串联；最后将串联后的电路连接到电源。具体来说，在程序段中，先画一条水平线段，在水平线段的上方放置X0的常开触点，在水平线段的下方放置Y0的常开触点，将它们并联；然后在水平线段的下方放置X1的常闭触点，将并联后的电路与X1的常闭触点串联；最后将串联后的电路的两端分别连接到电源的+24V和公共端。
- **步骤3：下载程序到PLC**：将编写好的起保停电路程序下载到PLC中，然后通过监控程序运行状态来检查电机的启动、保持和停止功能是否正常。例如，按下启动按钮X0，观察电机控制线圈Y0是否得电，电机是否启动；按下停止按钮X1，观察电机控制线圈Y0是否失电，电机是否停止；再次按下启动按钮X0，观察电机是否能够重新启动并保持运行。


### 模块5：五、程序开发与调试

#### 一、理论基础与概念解析
##### 1. TIA Portal基础操作 - 工程创建
TIA Portal是西门子公司的PLC编程软件，工程创建是使用TIA Portal进行PLC编程的第一步。首先，打开TIA Portal软件，点击“新建项目”按钮，然后输入项目名称，选择项目存储路径。接着，在项目中添加相应的PLC设备，选择PLC的型号和硬件配置。例如，选择西门子S7 - 1200系列的PLC，然后根据实际的硬件连接情况添加CPU模块、电源模块和I/O模块等。通过工程创建，可以为后续的梯形图编写、程序下载等操作做好准备。

##### 2. TIA Portal基础操作 - 梯形图编写
在TIA Portal中编写梯形图程序时，首先需要打开项目中的程序块，进入梯形图编辑界面。然后，通过拖拽的方式将所需的指令（如常开触点、常闭触点、输出线圈等）放置在程序段中，并按照逻辑关系进行连接。可以使用软件提供的指令库来快速添加所需的指令，同时可以通过注释来标注程序的功能，提高程序的可读性。例如，在编写电机起保停控制程序时，在梯形图编辑界面中添加X0的常开触点、X1的常闭触点和Y0的输出线圈，并按照起保停电路的逻辑关系进行连接，同时添加注释说明程序的功能。

##### 3. TIA Portal基础操作 - 下载监控
程序编写完成后，需要将程序下载到PLC中进行运行和监控。首先，将PLC与编程计算机通过通信电缆连接，并确保通信正常。然后，在TIA Portal中点击“下载”按钮，选择下载的目标设备和下载方式（如在线下载或离线下载）。下载完成后，可以通过TIA Portal的监控功能来观察程序的运行状态，包括输入端子的状态、输出端子的状态、定时器和计数器的当前值等。例如，在监控电机起保停控制程序时，可以观察X0、X1的输入状态以及Y0的输出状态，确保程序能够按照预期运行。

##### 4. 调试技能 - 变量强制修改
变量强制修改是在程序调试过程中常用的一种技能，用于模拟输入信号的状态或强制输出信号的状态，以测试程序的逻辑是否正确。在TIA Portal中，可以通过变量表来进行变量强制修改。首先，打开变量表，添加需要强制修改的变量，然后在变量表中选择需要修改的变量，设置其强制值。例如，在调试电机起保停控制程序时，可以通过变量强制修改来模拟启动按钮的按下状态，观察电机控制线圈是否能够得电，从而测试程序的启动功能是否正常。

##### 5. 调试技能 - CPU状态指示灯诊断
CPU状态指示灯可以提供PLC的运行状态信息，通过观察CPU状态指示灯的颜色和闪烁情况，可以诊断PLC的运行故障。不同颜色和闪烁模式的指示灯代表不同的含义，例如绿色常亮表示PLC正常运行，红色闪烁表示PLC存在故障等。在程序调试过程中，要注意观察CPU状态指示灯的变化，及时发现并解决PLC运行中的问题。例如，当CPU状态指示灯闪烁红色时，说明PLC可能存在硬件故障或程序错误，需要进一步检查硬件连接和程序代码。

#### 二、技术要点与操作方法
##### 1. 工程创建与硬件配置要点
在创建工程时，要确保选择正确的PLC型号和硬件配置，以保证程序能够正确下载到PLC中并运行。要根据实际的硬件连接情况准确添加CPU模块、电源模块和I/O模块等，并设置好各个模块的参数。例如，在添加I/O模块时，要确保DI/DO点数与实际连接的输入输出设备数量一致，避免出现点数不足或多余的情况。同时，要注意PLC的通信设置，确保编程计算机与PLC能够正常通信。

##### 2. 程序调试技巧
在进行变量强制修改时，要注意选择合适的变量进行强制，避免因强制错误的变量导致程序运行异常。要根据程序的逻辑和调试需求，有针对性地进行变量强制修改。在观察CPU状态指示灯时，要熟悉不同指示灯状态对应的含义，以便快速诊断PLC的运行故障。例如，当发现CPU状态指示灯闪烁红色时，要首先检查PLC的硬件连接是否牢固，然后检查程序代码是否存在错误，如语法错误、逻辑错误等。

#### 三、实践应用与操作要点
##### 1. TIA Portal工程创建实践步骤
- **步骤1：打开TIA Portal软件**：双击TIA Portal软件图标，打开软件界面。
- **步骤2：新建项目**：点击“新建项目”按钮，在弹出的对话框中输入项目名称（如“MotorControlProject”），选择项目存储路径，然后点击“确定”按钮。
- **步骤3：添加PLC设备**：在项目视图中，右键点击“设备和网络”，选择“添加新设备”，在设备选择界面中选择西门子S7 - 1200系列的PLC，选择相应的CPU型号（如CPU 1214C），然后点击“确定”按钮将PLC设备添加到项目中。
- **步骤4：配置硬件**：在设备视图中，根据实际的硬件连接情况添加电源模块、DI模块和DO模块等。例如，添加PS 307电源模块、DI 16x24V DC模块和DO 8x24V DC模块，并按照硬件手册进行正确的连接和参数设置。

##### 2. 程序下载与监控实践步骤
- **步骤1：连接PLC与编程计算机**：使用通信电缆将PLC的通信接口与编程计算机的USB接口连接，确保连接牢固。
- **步骤2：打开程序块**：在TIA Portal项目中，打开需要下载的程序块，进入梯形图编辑界面。
- **步骤3：下载程序**：点击软件界面中的“下载”按钮，在弹出的下载对话框中选择下载的目标设备（即连接的PLC），选择下载方式（如在线下载），然后点击“下载”按钮将程序下载到PLC中。
- **步骤4：监控程序运行**：点击软件界面中的“监控”按钮，打开变量表，观察输入端子的状态、输出端子的状态、定时器和计数器的当前值等，确保程序能够按照预期运行。例如，观察电机控制线圈Y0的输出状态，当按下启动按钮X0时，Y0是否得电，电机是否启动；按下停止按钮X1时，Y0是否失电，电机是否停止。

##### 3. 变量强制修改实践步骤
- **步骤1：打开变量表**：在TIA Portal软件界面中，点击“变量表”按钮，打开变量表编辑界面。
- **步骤2：添加变量**：在变量表中点击“添加新变量”按钮，输入需要强制修改的变量名称（如X0、Y0等），选择变量的类型（如输入、输出等）。
- **步骤3：强制修改变量**：在变量表中找到需要强制修改的变量，点击变量值列，输入强制值（如将X0强制为1表示按下启动按钮），然后点击“应用”按钮使强制修改生效。
- **步骤4：观察程序运行**：观察强制修改变量后程序的运行状态，检查程序是否按照预期响应。例如，将X0强制为1后，观察Y0是否得电，电机是否启动；将X1强制为1后，观察Y0是否失电，电机是否停止。


### 模块6：六、安全强化模块

#### 一、理论基础与概念解析
##### 1. 电气安全 - 漏电保护原理
漏电保护的原理是基于检测电路中的漏电电流。当电路中发生漏电时，漏电电流会通过漏电保护器的检测元件，使漏电保护器的脱扣机构动作，从而切断电源，防止人员触电和设备损坏。漏电保护器通常由检测元件、中间环节、执行机构和试验装置等部分组成。检测元件用于检测漏电电流，中间环节对检测到的漏电电流进行处理和放大，执行机构根据中间环节的信号动作切断电源，试验装置用于检查漏电保护器是否正常工作。例如，在家庭用电中，漏电保护器能够在人体触电时迅速切断电源，保障人身安全。

##### 2. 电气安全 - 安全电压等级
根据国家标准，安全电压等级分为42V、36V、24V、12V和6V。在一般的工业环境中，通常采用36V及以下的安全电压。例如，在潮湿的工作环境中，应采用24V或12V的安全电压；在特别潮湿的工作环境或金属容器内等场所，应采用12V的安全电压。安全电压的选择要根据工作环境和设备的要求来确定，以确保人员接触电气设备时的安全。

##### 3. 编程安全 - 双线圈冲突后果
双线圈冲突是指在梯形图程序中，同一个输出线圈被多次赋值。在PLC中，输出线圈的最终状态由最后一次赋值决定。例如，在程序中先将输出线圈Y0赋值为1，然后又将其赋值为0，那么Y0的最终状态为0。双线圈冲突会导致程序逻辑错误，使输出设备的动作不符合预期。例如，在电机控制程序中，如果出现双线圈冲突，可能会导致电机无法正常启动或停止，影响生产过程的正常进行。

##### 4. 编程安全 - 急停的梯形图禁忌
在梯形图编程中，急停电路的设计有禁忌。急停按钮的信号应该直接连接到PLC的DI模块，并且在梯形图中应该优先处理急停信号。不能将急停按钮的信号与其他信号进行逻辑运算后再连接到DI模块，否则可能会导致急停信号不能及时响应。例如，不能将急停按钮的信号与一个定时器的触点串联后再输入到DI模块，因为定时器的响应时间可能会延迟急停信号的输入，从而无法及时停止设备运行，危及人员和设备安全。

#### 二、技术要点与操作方法
##### 1. 漏电保护与安全电压应用要点
在设计电气系统时，要正确选择和安装漏电保护器，确保其能够有效检测漏电电流并及时切断电源。要根据工作环境和设备的要求合理选择安全电压等级，确保人员接触电气设备时的安全。例如，在设计工业控制电路时，要根据设备的工作环境选择合适的安全电压，如在车间的一般工作区域可以选择36V的安全电压，在潮湿的设备附近则选择24V的安全电压。

##### 2. 编程安全注意事项
在编写梯形图程序时，要避免出现双线圈冲突的情况，确保每个输出线圈只被赋值一次。在设计急停电路的梯形图时，要将急停按钮的信号直接连接到DI模块，并且在程序中优先处理急停信号，确保急停信号能够及时响应。例如，在编写电机控制程序时，将急停按钮的信号直接连接到DI模块的一个输入端子，并在程序的最前面处理急停信号，当急停信号输入时，立即停止所有输出设备的动作。

#### 三、实践应用与操作要点
##### 1. 漏电保护电路设计实践步骤
- **步骤1：选择漏电保护器**：根据电路的额定电流和工作环境选择合适的漏电保护器。例如，电路的额定电流为10A，工作环境为一般工业环境，选择额定电流为16A的漏电保护器。
- **步骤2：安装漏电保护器**：将漏电保护器安装在电路的电源进线端，按照漏电保护器的接线说明进行接线，确保火线、零线和接地线连接正确。
- **步骤3：测试漏电保护器**：接通电路电源，按下漏电保护器的试验按钮，检查漏电保护器是否能够正常动作，切断电源。如果漏电保护器能够正常动作，说明安装正确；否则，需要重新检查接线和漏电保护器的设置。

##### 2. 急停梯形图设计实践步骤
- **步骤1：确定急停按钮连接端子**：确定急停按钮连接到PLC的DI模块的哪个输入端子，例如连接到DI模块的输入端子X5。
- **步骤2：编写梯形图程序**：在梯形图编辑界面中，将X5的常闭触点串联到所有输出线圈的控制回路中。例如，在电机控制程序中，将X5的常闭触点串联到Y0、Y1等所有输出线圈的控制回路中。这样，当按下急停按钮时，X5的常闭触点断开，所有输出线圈失电，设备立即停止运行。
- **步骤3：下载程序并测试**：将编写好的包含急停梯形图程序的程序下载到PLC中，然后按下急停按钮，观察设备是否能够立即停止运行，验证急停电路的设计是否正确。例如，按下急停按钮后，电机等设备应该立即停止运转，确保人员和设备的安全。

## 五、课程内容总结（10%权重）

### 一、基础知识点  
1. **工业控制器分类与适用场景**：工业控制器包括PLC、DCS、SCADA等，PLC适用于离散制造，DCS用于过程控制，SCADA用于远程监控。  
2. **PLC发展历程**：经历三代，各代在功能、性能上逐步提升，从简单逻辑控制到支持复杂运动控制与远程监控。  
3. **PLC硬件组成**：最小系统由CPU、电源和I/O模块构成，DI/DO点数需根据实际需求估算。  
4. **I/O接线规范**：两线制、三线制传感器接线有不同要求，涉及熔断器选型与继电器隔离。  
5. **梯形图编程基础**：包含常开触点、常闭触点、输出线圈、TON定时器、计数器等基础指令，以及起保停电路、电气与机械互锁等编程范式。  
6. **TIA Portal操作**：工程创建、梯形图编写、下载监控、变量强制修改及CPU状态指示灯诊断等调试技能。  
7. **电气安全与编程安全**：漏电保护原理、安全电压等级，编程中双线圈冲突禁忌与急停梯形图设计要求。  


### 二、重要知识点  
1. **工业控制器对比**：不同控制器的适用场景、功能特点与性能指标对比，如PLC用于离散制造的逻辑控制。  
2. **PLC核心特性与原理**：高可靠性（硬件冗余、软件容错）、实时性（扫描循环流程）及工作原理。  
3. **I/O点数估算与接线**：DI/DO点数估算方法，两线制、三线制传感器接线规范，熔断器选型与继电器隔离应用。  
4. **梯形图编程技能**：基础指令应用，起保停电路、电气与机械互锁编程，TIA Portal程序编写与调试。  
5. **电气安全与编程安全实践**：漏电保护电路设计、急停梯形图设计，编程中双线圈冲突避免。  


### 三、核心理论与方法论  
1. **PLC工作原理**：扫描循环流程（内部处理、输入采样、程序执行、输出刷新）。  
2. **梯形图编程范式**：起保停电路构建（启动、保持、停止逻辑）、电气与机械互锁实现方法。  
3. **程序调试方法**：变量强制修改、CPU状态指示灯诊断，用于验证程序逻辑正确性。  
4. **电气系统设计方法论**：漏电保护电路设计步骤、急停梯形图设计规范。  


### 四、独特性与前沿性内容  
1. **中国PLC市场格局**：外资品牌主导，国内品牌不断突围但高端市场占有率低的竞争现状。  
2. **安全强化模块**：急停电路独立硬接线设计及编程禁忌，突出工业安全的特殊要求。  


### 五、重点学习内容  
1. **PLC应用场景**：离散制造、过程控制、基础设施等场景中PLC的具体应用。  
2. **硬件接线实操**：I/O接线、熔断器选型、继电器隔离的操作步骤与规范。  
3. **梯形图编程**：基础指令运用、起保停电路与互锁编程，TIA Portal程序编写与调试。  
4. **电气安全与编程安全**：漏电保护电路设计、急停梯形图设计，编程中双线圈冲突避免。

## 六、课堂测试（5%权重）

### 一、选择题（难度：低）
1. 题目内容：工业控制器中，适用于离散制造的是（  ）  
   A. DCS   B. PLC   C. SCADA   D. 变频器  
   答案：B  

2. 题目内容：PLC发展历程中，第几代开始支持复杂运动控制与远程监控？（  ）  
   A. 第一代   B. 第二代   C. 第三代   D. 都不支持  
   答案：C  


### 二、填空题（难度：中）
1. 题目内容：PLC硬件最小系统由CPU、_____和I/O模块构成。  
   答案：电源  


### 三、连线题（难度：高）
请将左侧工业控制器与右侧适用场景连线：  
左侧：PLC、DCS、SCADA  
右侧：A. 过程控制、B. 离散制造、C. 远程监控  
答案：PLC-B，DCS-A，SCADA-C  


### 四、排序题（难度：中）
请将PLC扫描循环工作流程按顺序排序：  
①程序执行、②输入采样、③输出刷新、④内部处理  
答案：④-②-①-③  


### 五、词义配对题（难度：低）
请将左侧PLC相关术语与右侧解释配对：  
左侧：常开触点、常闭触点、TON定时器  
右侧：A. 延时接通定时器指令、B. 触点闭合时允许电流通过、C. 触点断开时允许电流通过  
答案：常开触点-B，常闭触点-C，TON定时器-A
